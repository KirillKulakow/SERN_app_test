[{"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\App.js":"1","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\MainPage.js":"2","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\router\\index.js":"3","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\index.js":"4","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\UsersStatPage.js":"5","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Header.js":"6","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Footer.js":"7","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\TableStats.js":"8","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Pagination.js":"9","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\utils\\apiRequest.js":"10","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\utils\\axios.js":"11","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\UserInfoPage.js":"12","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\BreadCrumbs.js":"13","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Title.js":"14","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\LinearCharts.js":"15","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\UserInfo.js":"16"},{"size":122,"mtime":1612293202666,"results":"17","hashOfConfig":"18"},{"size":3338,"mtime":1612426349628,"results":"19","hashOfConfig":"18"},{"size":711,"mtime":1612347053834,"results":"20","hashOfConfig":"18"},{"size":220,"mtime":1612281510233,"results":"21","hashOfConfig":"18"},{"size":526,"mtime":1612854586908,"results":"22","hashOfConfig":"18"},{"size":351,"mtime":1612355070476,"results":"23","hashOfConfig":"18"},{"size":515,"mtime":1612355068397,"results":"24","hashOfConfig":"18"},{"size":4521,"mtime":1612860589153,"results":"25","hashOfConfig":"18"},{"size":2073,"mtime":1612362963756,"results":"26","hashOfConfig":"18"},{"size":756,"mtime":1612860543614,"results":"27","hashOfConfig":"18"},{"size":110,"mtime":1612804671148,"results":"28","hashOfConfig":"18"},{"size":433,"mtime":1612689794751,"results":"29","hashOfConfig":"18"},{"size":1256,"mtime":1612855624505,"results":"30","hashOfConfig":"18"},{"size":399,"mtime":1612857443408,"results":"31","hashOfConfig":"18"},{"size":1815,"mtime":1612811280616,"results":"32","hashOfConfig":"18"},{"size":4192,"mtime":1612860654905,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"4b27wo",{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\App.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\MainPage.js",[],["69","70"],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\router\\index.js",[],["71","72"],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\index.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\UsersStatPage.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Header.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Footer.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\TableStats.js",["73"],"import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport Pagination from \"./Pagination\";\r\nimport styles from \"./TableStats.module.scss\";\r\nimport { getUsers } from \"../utils/apiRequest\";\r\n\r\nconst initOptions = [...new Array(41).keys()].map((el, index) => index + 10);\r\n\r\nconst TableStats = () => {\r\n  const [page, setPage] = useState(1);\r\n  let location = useLocation();\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [limit, setLimit] = useState(16);\r\n  const [data, setData] = useState([]);\r\n  const [pageCount, setPageCount] = useState(0);\r\n\r\n  const handleChangePage = useCallback(\r\n    (data) => {\r\n      let { selected } = data;\r\n      const pageQuery = queryString.parse(location.search);\r\n      pageQuery.page = selected + 1;\r\n      const newQuery = `/users_stat?${queryString.stringify(pageQuery)}`;\r\n      history.push(newQuery);\r\n    },\r\n    [history, location]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const pageQuery = Number(queryString.parse(location.search).page);\r\n    const limitQuery = Number(queryString.parse(location.search).limit);\r\n    if (pageQuery && !Number.isNaN(pageQuery)) {\r\n      if (page !== pageQuery) {\r\n        setPage(pageQuery);\r\n      }\r\n    } else {\r\n      setPage(1);\r\n    }\r\n    if (limitQuery && !Number.isNaN(limitQuery)) {\r\n      if (limit !== limitQuery) {\r\n        setLimit(limitQuery);\r\n      }\r\n    } else {\r\n      setLimit(16);\r\n    }\r\n    // only location.search\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [location.search]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(null);\r\n    getUsers({ page, limit })\r\n      .then((res) => {\r\n        setData(res.data);\r\n        setPageCount(Number(res.allPage));\r\n        setLoading(false);\r\n      })\r\n      .catch((e) => {\r\n        setError(\"Some error: \" + e.message);\r\n      });\r\n  }, [page, limit]);\r\n\r\n  const pushToScreenUser = useCallback(\r\n    (id, first_name, last_name) => () => {\r\n      history.push(\r\n        `/users_stat/${id}?first_name=${first_name}&last_name=${last_name}`\r\n      );\r\n    },\r\n    [history]\r\n  );\r\n\r\n  const usersList = useCallback(\r\n    (data) => (\r\n      <tbody>\r\n        {data.map((el) => (\r\n          <tr\r\n            onClick={pushToScreenUser(el.user_id, el.first_name, el.last_name)}\r\n            key={`${el.user_id}${el.date}`}\r\n          >\r\n            <td>{el.user_id}</td>\r\n            <td>{el.first_name}</td>\r\n            <td>{el.last_name}</td>\r\n            <td>{el.email}</td>\r\n            <td>{el.gender}</td>\r\n            <td>{el.ip_address}</td>\r\n            <td>{el.clicks}</td>\r\n            <td>{el.page_views}</td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    ),\r\n    [pushToScreenUser]\r\n  );\r\n\r\n  const setNewLimit = (event) => {\r\n    const query = queryString.parse(location.search);\r\n    query.limit = Number(event.target.value);\r\n    const newQuery = `/users_stat?${queryString.stringify(query)}`;\r\n    history.push(newQuery);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <select onChange={setNewLimit} value={limit}>\r\n        {initOptions.map((el) => (\r\n          <option key={el} value={el}>\r\n            {el}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <table className={styles.table}>\r\n        <thead>\r\n          <tr>\r\n            <th>Id</th>\r\n            <th>First name</th>\r\n            <th>Last name</th>\r\n            <th>Email</th>\r\n            <th>Gender</th>\r\n            <th>IP address</th>\r\n            <th>Total clicks</th>\r\n            <th>Total page views</th>\r\n          </tr>\r\n        </thead>\r\n        {data.length > 0 && !loading ? (\r\n          usersList(data)\r\n        ) : error ? (\r\n          <tbody>\r\n            <tr>\r\n              <td colSpan='8' style={{ height: \"800px\" }}>\r\n                {error}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        ) : (\r\n          <tbody>\r\n            <tr>\r\n              <td colSpan='8' style={{ height: \"800px\" }}>\r\n                Loading...\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        )}\r\n      </table>\r\n      {data.length > 0 && !loading && !error ? (\r\n        <Pagination\r\n          pageInit={page}\r\n          pageCount={pageCount}\r\n          handlePageClick={handleChangePage}\r\n        />\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableStats;\r\n","C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Pagination.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\utils\\apiRequest.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\utils\\axios.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\containers\\UserInfoPage.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\BreadCrumbs.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\Title.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\LinearCharts.js",[],"C:\\Users\\Kirill\\Downloads\\test_users\\server\\client\\src\\components\\UserInfo.js",[],{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"74","replacedBy":"78"},{"ruleId":"76","replacedBy":"79"},{"ruleId":"80","severity":1,"message":"81","line":15,"column":17,"nodeType":"82","messageId":"83","endLine":15,"endColumn":25},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],["84"],["85"],"no-unused-vars","'setError' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]